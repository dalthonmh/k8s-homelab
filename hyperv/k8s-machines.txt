# VM Master:
New-VM -Name "k8s-master" `
    -MemoryStartupBytes 2GB `
    -Generation 2 `
    -NewVHDPath "C:\Hyper-V\k8s-master.vhdx" `
    -NewVHDSizeBytes 20GB

Set-VMProcessor -VMName "k8s-master" -Count 2
Set-VMFirmware -VMName "k8s-master" -EnableSecureBoot Off
Set-VMMemory -VMName "k8s-master" -DynamicMemoryEnabled $false

# Dos adaptadores de red
Add-VMNetworkAdapter -VMName "k8s-master" -SwitchName "Kubernetes-Internal"
Add-VMNetworkAdapter -VMName "k8s-master" -SwitchName "Default Switch"


# VMs Workers (repetir para worker1 y worker2):
New-VM -Name "k8s-worker1" `
    -MemoryStartupBytes 2GB `
    -Generation 2 `
    -NewVHDPath "C:\Hyper-V\k8s-worker1.vhdx" `
    -NewVHDSizeBytes 20GB

Set-VMProcessor -VMName "k8s-worker1" -Count 2
Set-VMFirmware -VMName "k8s-worker1" -EnableSecureBoot Off
Set-VMMemory -VMName "k8s-worker1" -DynamicMemoryEnabled $false

Add-VMNetworkAdapter -VMName "k8s-worker1" -SwitchName "Kubernetes-Internal"
Add-VMNetworkAdapter -VMName "k8s-worker1" -SwitchName "Default Switch"